<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Glad to meet you, the DN42 Internet!'>
<title>DN42 最简教程</title>

<link rel='canonical' href='https://blog.highp.ing/p/dn42/'>

<link rel="stylesheet" href="/scss/style.min.abbd69b2908fdfcd5179898beaafd374514a86538d81639ddd2c58c06ae54e40.css"><meta property='og:title' content='DN42 最简教程'>
<meta property='og:description' content='Glad to meet you, the DN42 Internet!'>
<meta property='og:url' content='https://blog.highp.ing/p/dn42/'>
<meta property='og:site_name' content='HighPing们の小小藏身地'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2024-02-07T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2024-02-07T00:00:00&#43;00:00'/><meta property='og:image' content='https://blog.highp.ing/p/dn42/dn42.png' />
<meta name="twitter:title" content="DN42 最简教程">
<meta name="twitter:description" content="Glad to meet you, the DN42 Internet!"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://blog.highp.ing/p/dn42/dn42.png' />
    <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "l06b58u4re");
</script>
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    <img src="https://blog.highp.ing/gaoqingwuma.jpg" width="300" height="300" class="site-logo" loading="lazy" alt="Avatar">
                
                </a>
                
                    <span class="emoji">😇</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">HighPing们の小小藏身地</a></h1>
            <h2 class="site-description">High Ping Network</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/High-Ping-Network'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg t="1706662022006" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4198" width="200" height="200"><path d="M512.465 98.744c-236.05-2.401-429.41 187.034-431.998 423.242 0.894 183.912 120.176 346.283 295.332 402.018 21.6 3.93 29.451-9.04 29.451-20.436v-71.916c-120.17 25.545-145.7-56.59-145.7-56.59a112.364 112.364 0 0 0-47.914-62.089c-39.272-25.937 3.141-25.545 3.141-25.545a90.702 90.702 0 0 1 65.978 43.624c25.358 43.993 81.26 59.548 125.678 34.976a91.569 91.569 0 0 1 27.487-56.59c-95.825-10.615-196.36-46.768-196.36-209.067a163.13 163.13 0 0 1 43.591-114.358 148.652 148.652 0 0 1 4.32-111.609c15.896-35.223 36.525-11.397 117.815 43.229a419.24 419.24 0 0 1 216.002 0c82.471-54.626 117.82-43.229 117.82-43.229a148.657 148.657 0 0 1 4.32 111.61 163.145 163.145 0 0 1 45.945 113.57c0 162.695-101.321 198.458-196.36 209.067a98.273 98.273 0 0 1 29.452 78.594v115.933c0 13.752 7.856 24.756 29.457 20.43 174.63-56.071 293.466-218.106 294.545-401.622C941.878 285.778 748.52 96.343 512.465 98.744" fill="#231F20" p-id="4199"></path></svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://blog.highp.ing/index.xml'
                        target="_blank"
                        title="rss"
                        rel="me"
                    >
                        
                        
                            <svg t="1707144507416" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4353" width="200" height="200"><path d="M329.142857 768q0 45.714286-32 77.714286t-77.714286 32-77.714286-32-32-77.714286 32-77.714286 77.714286-32 77.714286 32 32 77.714286zm292.571429 70.285714q1.142857 16-9.714286 27.428571-10.285714 12-26.857143 12l-77.142857 0q-14.285714 0-24.571429-9.428571t-11.428571-23.714286q-12.571429-130.857143-105.428571-223.714286t-223.714286-105.428571q-14.285714-1.142857-23.714286-11.428571t-9.428571-24.571429l0-77.142857q0-16.571429 12-26.857143 9.714286-9.714286 24.571429-9.714286l2.857143 0q91.428571 7.428571 174.857143 46t148 103.714286q65.142857 64.571429 103.714286 148t46 174.857143zm292.571429 1.142857q1.142857 15.428571-10.285714 26.857143-10.285714 11.428571-26.285714 11.428571l-81.714286 0q-14.857143 0-25.428571-10t-11.142857-24.285714q-6.857143-122.857143-57.714286-233.428571t-132.285714-192-192-132.285714-233.428571-58.285714q-14.285714-0.571429-24.285714-11.142857t-10-24.857143l0-81.714286q0-16 11.428571-26.285714 10.285714-10.285714 25.142857-10.285714l1.714286 0q149.714286 7.428571 286.571429 68.571429t243.142857 168q106.857143 106.285714 168 243.142857t68.571429 286.571429z" p-id="4354"></path></svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='http:/t.me/HighPingNetwork'
                        target="_blank"
                        title="telegram"
                        rel="me"
                    >
                        
                        
                            <svg t="1706421640444" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4205" width="200" height="200"><path d="M912.213333 154.026667A85.333333 85.333333 0 0 0 853.333333 128a85.333333 85.333333 0 0 0-33.28 6.826667l-708.266666 306.773333a42.666667 42.666667 0 0 0-26.453334 42.666667V512a42.666667 42.666667 0 0 0 29.44 42.666667L298.666667 616.106667l55.466666 187.306666a75.946667 75.946667 0 0 0 56.32 53.333334 62.72 62.72 0 0 0 15.36 0 73.813333 73.813333 0 0 0 50.773334-20.48l67.84-64 131.413333 103.68a85.333333 85.333333 0 0 0 90.026667 9.386666l14.08-7.253333a88.32 88.32 0 0 0 46.506666-62.72L938.666667 235.093333a90.026667 90.026667 0 0 0-26.453334-81.066666zM763.733333 805.12a25.173333 25.173333 0 0 1-12.8 17.493333l-14.08 7.253334a19.626667 19.626667 0 0 1-8.96 2.133333 19.626667 19.626667 0 0 1-12.373333-4.693333l-160.426667-128a20.906667 20.906667 0 0 0-27.733333 0l-94.72 89.173333a11.093333 11.093333 0 0 1-5.973333 2.133333V640a21.76 21.76 0 0 1 6.826666-15.786667c136.106667-128 217.6-199.68 266.24-240.64a15.786667 15.786667 0 0 0 5.12-11.093333 13.653333 13.653333 0 0 0-4.266666-11.093333 14.933333 14.933333 0 0 0-17.92-4.266667l-322.56 203.52a21.333333 21.333333 0 0 1-18.346667 0L149.333333 494.933333l694.186667-301.226666a16.64 16.64 0 0 1 7.68 0 22.186667 22.186667 0 0 1 16.213333 7.68 26.88 26.88 0 0 1 6.826667 23.466666z" p-id="4206"></path></svg>

                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='http://highp.ing'
                        target="_blank"
                        title="Web"
                        rel="me"
                    >
                        
                        
                            <svg t="1706661682676" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4223" width="200" height="200"><path d="M698.026667 597.333333C701.44 569.173333 704 541.013333 704 512 704 482.986667 701.44 454.826667 698.026667 426.666667L842.24 426.666667C849.066667 453.973333 853.333333 482.56 853.333333 512 853.333333 541.44 849.066667 570.026667 842.24 597.333333M622.506667 834.56C648.106667 787.2 667.733333 736 681.386667 682.666667L807.253333 682.666667C766.293333 753.066667 701.013333 807.68 622.506667 834.56M611.84 597.333333 412.16 597.333333C407.893333 569.173333 405.333333 541.013333 405.333333 512 405.333333 482.986667 407.893333 454.4 412.16 426.666667L611.84 426.666667C615.68 454.4 618.666667 482.986667 618.666667 512 618.666667 541.013333 615.68 569.173333 611.84 597.333333M512 851.626667C476.586667 800.426667 448 743.68 430.506667 682.666667L593.493333 682.666667C576 743.68 547.413333 800.426667 512 851.626667M341.333333 341.333333 216.746667 341.333333C257.28 270.506667 322.986667 215.893333 401.066667 189.44 375.466667 236.8 356.266667 288 341.333333 341.333333M216.746667 682.666667 341.333333 682.666667C356.266667 736 375.466667 787.2 401.066667 834.56 322.986667 807.68 257.28 753.066667 216.746667 682.666667M181.76 597.333333C174.933333 570.026667 170.666667 541.44 170.666667 512 170.666667 482.56 174.933333 453.973333 181.76 426.666667L325.973333 426.666667C322.56 454.826667 320 482.986667 320 512 320 541.013333 322.56 569.173333 325.973333 597.333333M512 171.946667C547.413333 223.146667 576 280.32 593.493333 341.333333L430.506667 341.333333C448 280.32 476.586667 223.146667 512 171.946667M807.253333 341.333333 681.386667 341.333333C667.733333 288 648.106667 236.8 622.506667 189.44 701.013333 216.32 766.293333 270.506667 807.253333 341.333333M512 85.333333C276.053333 85.333333 85.333333 277.333333 85.333333 512 85.333333 747.52 276.48 938.666667 512 938.666667 747.52 938.666667 938.666667 747.52 938.666667 512 938.666667 276.48 747.52 85.333333 512 85.333333Z" p-id="4224"></path></svg>

                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>关于</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="https://blog.highp.ing/en/" >English</option>
                        
                            <option value="https://blog.highp.ing/" selected>中文</option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>暗色模式</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#前言">前言</a></li>
    <li><a href="#在-dn42-网络上注册你自己的-asn-以及-ip-段">在 DN42 网络上注册你自己的 ASN 以及 IP 段</a>
      <ol>
        <li><a href="#在-dn42-的-gitea-上注册好自己的账号">在 DN42 的 Gitea 上注册好自己的账号</a></li>
        <li><a href="#pgp-验证">PGP 验证</a></li>
        <li><a href="#添加-ssh-key">添加 SSH KEY</a></li>
        <li><a href="#将-fork-的仓库-clone-到本地">将 Fork 的仓库 Clone 到本地</a></li>
        <li><a href="#写好注册文件">写好注册文件</a>
          <ol>
            <li><a href="#提示">提示</a></li>
            <li><a href="#datapersonyourname-dn42">data/person/[YOURNAME]-DN42</a></li>
            <li><a href="#datamntneryourname-mnt">data/mntner/[YOURNAME]-MNT</a></li>
            <li><a href="#dataaut-numasasn">data/aut-num/AS[ASN]</a></li>
            <li><a href="#datainetnumiprange-此处的--用-_-代替">data/inetnum/[IPRange] (此处的 &lsquo;/&rsquo; 用 &lsquo;_&rsquo; 代替)</a></li>
            <li><a href="#datarouteiprange-此处的--用-_-代替">data/route/[IPRange] (此处的 &lsquo;/&rsquo; 用 &lsquo;_&rsquo; 代替)</a></li>
            <li><a href="#各项说明">各项说明</a></li>
            <li><a href="#填写示例">填写示例</a></li>
          </ol>
        </li>
        <li><a href="#push-并创建-pr">Push 并创建 PR</a></li>
        <li><a href="#按照提示修改配置">按照提示修改配置</a></li>
        <li><a href="#完成-dn42-的申请">完成 DN42 的申请</a></li>
      </ol>
    </li>
    <li><a href="#配网">配网</a>
      <ol>
        <li><a href="#在机器上安装好必要依赖">在机器上安装好必要依赖</a></li>
        <li><a href="#在-potat0-机器人创建-peer-信息">在 Potat0 机器人创建 Peer 信息</a>
          <ol>
            <li><a href="#登录">登录</a></li>
            <li><a href="#创建一个-peer">创建一个 Peer</a></li>
          </ol>
        </li>
        <li><a href="#配置-wireguard">配置 WireGuard</a>
          <ol>
            <li><a href="#编写配置文件">编写配置文件</a></li>
            <li><a href="#开启-wireguard-隧道">开启 WireGuard 隧道</a></li>
            <li><a href="#检查连接">检查连接</a></li>
          </ol>
        </li>
        <li><a href="#配置-bird2">配置 Bird2</a>
          <ol>
            <li><a href="#下载-roa-文件">下载 Roa 文件</a></li>
            <li><a href="#编写-bird2-主配置文件">编写 Bird2 主配置文件</a></li>
            <li><a href="#编写-bird2-peers-文件">编写 Bird2 Peers 文件</a></li>
            <li><a href="#bird2-启动">Bird2? 启动!</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#all-done">ALL DONE!</a></li>
    <li><a href="#小结">小结</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/dn42/">
                <img src="/p/dn42/dn42_hu2aff6188372466bf0fcde6ee8756fedf_2314_800x0_resize_box_3.png"
                        srcset="/p/dn42/dn42_hu2aff6188372466bf0fcde6ee8756fedf_2314_800x0_resize_box_3.png 800w, /p/dn42/dn42_hu2aff6188372466bf0fcde6ee8756fedf_2314_1600x0_resize_box_3.png 1600w"
                        width="800" 
                        height="320" 
                        loading="lazy"
                        alt="Featured image of post DN42 最简教程" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/main/" >
                Main
            </a>
        
            <a href="/categories/dn42/" >
                DN42
            </a>
        
            <a href="/categories/asn/" >
                ASN
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/dn42/">DN42 最简教程</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            Glad to meet you, the DN42 Internet!
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Feb 07, 2024</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 10 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h1 id="dn42-最简教程">DN42 最简教程</h1>
<p>本文由 <code>High Ping Network</code> 的小伙伴 GenshinMinecraft 进行编撰，首发于 <a class="link" href="https://blog.highp.ing"  target="_blank" rel="noopener"
    >本博客</a></p>
<blockquote>
<p><strong>去中心化网络 42</strong>（英语：Decentralized Network 42，简称 <strong>dn42</strong>），是一个<a class="link" href="https://zh.wikipedia.org/wiki/%E5%8E%BB%E4%B8%AD%E5%BF%83%E5%8C%96"  title="去中心化"
     target="_blank" rel="noopener"
    >去中心化</a>、<a class="link" href="https://zh.wikipedia.org/wiki/%E5%B0%8D%E7%AD%89%E7%B6%B2%E8%B7%AF"  title="点对点网络"
     target="_blank" rel="noopener"
    >端到端</a>的网络，通过 <a class="link" href="https://zh.wikipedia.org/wiki/%E8%99%9B%E6%93%AC%E7%A7%81%E4%BA%BA%E7%B6%B2%E8%B7%AF"  title="虚拟专用网"
     target="_blank" rel="noopener"
    >VPN</a> 和软件或硬件 <a class="link" href="https://zh.wikipedia.org/wiki/%E8%BE%B9%E7%95%8C%E7%BD%91%E5%85%B3%E5%8D%8F%E8%AE%AE"  title="边界网关协议"
     target="_blank" rel="noopener"
    >BGP</a> 路由器构建。</p>
</blockquote>
<blockquote>
<p>dn42 并非作为<a class="link" href="https://zh.wikipedia.org/wiki/%E6%9A%97%E7%BD%91"  title="暗网"
     target="_blank" rel="noopener"
    >暗网</a>为接入者提供匿名链接，而是希望研究现有的<a class="link" href="https://zh.wikipedia.org/wiki/%E4%BA%92%E8%81%94%E7%BD%91"  title="互联网"
     target="_blank" rel="noopener"
    >互联网</a>中已经存在的路由技术并尝试在用户间建立起直接的、无须进行 <a class="link" href="https://zh.wikipedia.org/wiki/%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2"  title="网络地址转换"
     target="_blank" rel="noopener"
    >NAT</a> 的连接。</p>
</blockquote>
<blockquote>
<p>这一网络不是全<a class="link" href="https://zh.wikipedia.org/wiki/%E7%BD%91%E7%8A%B6%E7%BD%91%E7%BB%9C"  title="网状网络"
     target="_blank" rel="noopener"
    >网状结构</a>的。在不同网络之间进行连通时，它极少使用物理链接而多用虚拟链接。这些虚拟链接以因特网作为传输介质，而又与因特网独立，更像是光纤或网线。每个人都用 VPN 连接的方式连通一个或多个接入者。这些连接在通常情况下使用公共互联网 <a class="link" href="https://zh.wikipedia.org/wiki/IP%E5%9C%B0%E5%9D%80"  title="IP地址"
     target="_blank" rel="noopener"
    >IP 地址</a>。如果需要使用 <a class="link" href="https://zh.wikipedia.org/wiki/GRE"  title="GRE"
     target="_blank" rel="noopener"
    >GRE</a> 或 SIT，可以根据 IP 地址的变化，更新链接接口上的公共互联网地址。<a class="link" href="https://zh.wikipedia.org/wiki/OpenVPN"  title="OpenVPN"
     target="_blank" rel="noopener"
    >OpenVPN</a> 能够在没有外部工具协助的情况下做到这一点。在 VPN 连接上运行的 BGP 用于处理<a class="link" href="https://zh.wikipedia.org/wiki/%E8%87%AA%E6%B2%BB%E7%B3%BB%E7%BB%9F"  title="自治系统"
     target="_blank" rel="noopener"
    >自治系统</a>间的路由。自治系统内通常使用<a class="link" href="https://zh.wikipedia.org/wiki/%E5%BC%80%E6%94%BE%E5%BC%8F%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%BC%98%E5%85%88"  title="开放式最短路径优先"
     target="_blank" rel="noopener"
    >开放式最短路径优先</a>协议，不过显然接入者亦可使用方便他们进行自治系统内部路由的任何协议去完成。</p>
</blockquote>
<h2 id="前言">前言</h2>
<p>既然要做到最简，那必须一句废话也不多，所以本文不会有太多的解释或者说 &ldquo;为什么&rdquo;，只是会告诉你要<strong>这么去做</strong></p>
<p>本文参考了:</p>
<ul>
<li><a class="link" href="https://lantian.pub/article/modify-website/dn42-experimental-network-2020.lantian/"  target="_blank" rel="noopener"
    >Lan Tian @ Blog</a></li>
<li><a class="link" href="https://dn42.dev/howto/Getting-Started"  target="_blank" rel="noopener"
    >DN42 Getting Started</a></li>
</ul>
<p>你需要:</p>
<ul>
<li>一台机器 (建议 Debian 系列 Linux，且最好拥有 IPv4 &amp; IPv6 双栈)</li>
<li>脑子 (其他无脑教程可以说不用脑子，但是配网有一大部分是脑力活动)</li>
<li>一个与你 Peer 的人 (本文采用 Potat0 提供的 Telegram 机器人)</li>
<li>掌握 Git, Bash, Gitea, SSH, PGP 等的基础用法</li>
</ul>
<p>注意：本文只提供 IPv4 单栈教程，IPv6 大同小异</p>
<p>当你需要无偿/有偿帮助时，可以联系 Telegram: <a class="link" href="https://t.me/C1oudF1are"  target="_blank" rel="noopener"
    >@C1oudF1are</a></p>
<h2 id="在-dn42-网络上注册你自己的-asn-以及-ip-段">在 DN42 网络上注册你自己的 ASN 以及 IP 段</h2>
<h3 id="在-dn42-的-gitea-上注册好自己的账号">在 DN42 的 Gitea 上注册好自己的账号</h3>
<p>DN42 的 Gitea 地址为 <a class="link" href="https://git.dn42.dev"  target="_blank" rel="noopener"
    >https://git.dn42.dev</a></p>
<p>按照平常你在其他网站注册的思路，在 DN42 的 Gitea 注册一个账号，很简单</p>
<p>然后，从 <a class="link" href="https://git.dn42.dev/dn42/registry"  target="_blank" rel="noopener"
    >DN42</a> 主仓库 Fork 一份到自己的账号上，比如:</p>
<p><code>https://git.dn42.dev/YourUserName/registry</code></p>
<p>这一步到这里就差不多了!</p>
<h3 id="pgp-验证">PGP 验证</h3>
<p>这一步为必选，不然无法通过 Git 仓库内的 CI/CD 验证</p>
<p>根据 <a class="link" href="https://docs.github.com/zh/authentication/managing-commit-signature-verification/generating-a-new-gpg-key?platform=linux"  target="_blank" rel="noopener"
    >Github 的这篇文章</a> 生成好自己的 PGP 公钥和密钥</p>
<p>并在 <a class="link" href="https://git.dn42.dev/user/settings/keys"  target="_blank" rel="noopener"
    >DN42 Gitea Setting</a> 导入自己的 PGP 密钥</p>
<p><em>PS: 注意是 <code>管理 GPG 密钥</code> 不是 <code>管理 SSH 密钥</code></em></p>
<h3 id="添加-ssh-key">添加 SSH KEY</h3>
<p>这一步和其他的 Git 服务都差不多，在本地生成好公钥与密钥并直接导入 <a class="link" href="https://git.dn42.dev/user/settings/keys"  target="_blank" rel="noopener"
    >DN42 Gitea Setting</a> 即可</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">ssh-keygen -C [YourEmail]
</span></span></code></pre></td></tr></table>
</div>
</div><p>一路回车</p>
<p>随后，在 <code>~/.ssh/id_[加密].pub</code> 储存着你的公钥，将其导入 <a class="link" href="https://git.dn42.dev/user/settings/keys"  target="_blank" rel="noopener"
    >DN42 Gitea Setting</a></p>
<p><em>PS: 注意是 <code>管理 SSH 密钥</code> 不是 <code>管理 GPG 密钥</code></em></p>
<h3 id="将-fork-的仓库-clone-到本地">将 Fork 的仓库 Clone 到本地</h3>
<p>将你刚才 Fork 的仓库 Clone 到本地，比如我的 Clone 链接就是 <code>git@git.dn42.dev:GenshinMinecraft/registry.git</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">git clone git@git.dn42.dev:YourUsername/registry.git <span class="o">&amp;&amp;</span> <span class="nb">cd</span> registry
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="写好注册文件">写好注册文件</h3>
<p>一般来说，在仅 IPv4 的环境下，你至少需要 5 个文件来申请</p>
<p>首先在 <a class="link" href="https://explorer.burble.com/free#/asn"  target="_blank" rel="noopener"
    >这个网站</a> 和 <a class="link" href="https://explorer.burble.com/free#/4"  target="_blank" rel="noopener"
    >那个网站</a> 查看还未注册的 AS Number 和 IPv4 段</p>
<h4 id="提示">提示</h4>
<p>请注意，普通用户最好申请 <code>/27</code> 的段子，共有 32 个 IPv4，是完全够用的</p>
<p>当你申请过高的 IP 段时，有可能会被驳回，毕竟就算是在虚拟网络中，IPv4 也是十分珍贵的</p>
<p>随后，编写好这几个文件 (下面都是例子，各个项目的解释后面会说):</p>
<h4 id="datapersonyourname-dn42">data/person/[YOURNAME]-DN42</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">person:             [YourName]
</span></span><span class="line"><span class="cl">contact:            [YourEmail]
</span></span><span class="line"><span class="cl">nic-hdl:            [YOURNAME]-DN42
</span></span><span class="line"><span class="cl">mnt-by:             [YOURNAME]-MNT
</span></span><span class="line"><span class="cl">source:             DN42
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="datamntneryourname-mnt">data/mntner/[YOURNAME]-MNT</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">mntner:             [YOURNAME]-MNT
</span></span><span class="line"><span class="cl">admin-c:            [YOURNAME]-DN42
</span></span><span class="line"><span class="cl">tech-c:             [YOURNAME]-DN42
</span></span><span class="line"><span class="cl">mnt-by:             [YOURNAME]-MNT
</span></span><span class="line"><span class="cl">source:             DN42
</span></span><span class="line"><span class="cl">auth:               pgp-fingerprint [你的PGP指纹]
</span></span><span class="line"><span class="cl">remarks:            [INFO]
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="dataaut-numasasn">data/aut-num/AS[ASN]</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">aut-num:            AS[ASN]
</span></span><span class="line"><span class="cl">as-name:            [YOURNAME]-AS
</span></span><span class="line"><span class="cl">descr:              [INFO]
</span></span><span class="line"><span class="cl">remarks:            [INFO]
</span></span><span class="line"><span class="cl">admin-c:            [YOURNAME]-DN42
</span></span><span class="line"><span class="cl">tech-c:             [YOURNAME]-DN42
</span></span><span class="line"><span class="cl">mnt-by:             [YOURNAME]-MNT
</span></span><span class="line"><span class="cl">source:             DN42
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="datainetnumiprange-此处的--用-_-代替">data/inetnum/[IPRange] (此处的 &lsquo;/&rsquo; 用 &lsquo;_&rsquo; 代替)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">inetnum:            [IPRangeStart] - [IPRangeEnd]
</span></span><span class="line"><span class="cl">netname:            [YOURNAME]-IPV4
</span></span><span class="line"><span class="cl">descr:              [INFO]
</span></span><span class="line"><span class="cl">remarks:            [INFO]
</span></span><span class="line"><span class="cl">country:            HK
</span></span><span class="line"><span class="cl">admin-c:            [YOURNAME]-DN42
</span></span><span class="line"><span class="cl">tech-c:             [YOURNAME]-DN42
</span></span><span class="line"><span class="cl">mnt-by:             [YOURNAME]-MNT
</span></span><span class="line"><span class="cl">status:             ASSIGNED
</span></span><span class="line"><span class="cl">cidr:               [IPRange]
</span></span><span class="line"><span class="cl">source:             DN42
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="datarouteiprange-此处的--用-_-代替">data/route/[IPRange] (此处的 &lsquo;/&rsquo; 用 &lsquo;_&rsquo; 代替)</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">route:              [IPRanges]
</span></span><span class="line"><span class="cl">descr:              [INFO]
</span></span><span class="line"><span class="cl">remarks:            [INFO]
</span></span><span class="line"><span class="cl">origin:             AS[ASN]
</span></span><span class="line"><span class="cl">mnt-by:             [YOURNAME]-MNT
</span></span><span class="line"><span class="cl">source:             DN42
</span></span><span class="line"><span class="cl">max-length:         [CIDR 掩码位]
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="各项说明">各项说明</h4>
<ul>
<li><code>[YourName]</code>: 这部分填写你的名字，<strong>大小写均可</strong></li>
<li><code>[YOURNAME]</code>: 这部分也是填写你的名字，<strong>必须为大写</strong></li>
<li><code>[ASN]</code>: 这部分填写你的 AS Number，不带 <code>AS</code> 前缀</li>
<li><code>[INFO]</code>: 这部分随便填写，只作为解释说明，可以写一些自己的联系方式以及个人信息</li>
<li><code>[YourEmail]</code>: 这部分填写你的联系邮箱，请注意一定要可以<strong>接收发送信息</strong></li>
<li><code>[你的PGP指纹]</code>: 这部分请根据上面生成 PGP KEY 的部分获取</li>
<li><code>[IPRange]</code>: 这部分填写你的 IP 段，请注意<strong>在文件名中的 CIDR 的 &lsquo;/&rsquo; 需要使用 &lsquo;_&rsquo; 来表示</strong></li>
<li><code>[IPRangeStart]</code>: 这部分是你的 IP 段的开始 IP，可以在<a class="link" href="https://zh.rakko.tools/tools/27/"  target="_blank" rel="noopener"
    >这个网站</a>解析出来</li>
<li><code>[IPRangeEnd]</code>: 这部分是你的 IP 段的结束 IP，解析方法同上</li>
<li><code>[CIDR 掩码位]</code>: 你的 IP 段中 &lsquo;/&rsquo; 后面的数字</li>
</ul>
<h4 id="填写示例">填写示例</h4>
<p>比如，我的各项信息为:</p>
<ul>
<li><code>[YourName]</code>: <code>GenshinMinecraft</code></li>
<li><code>[YOURNAME]</code>: <code>GENSHINMINECRAFT</code></li>
<li><code>[ASN]</code>: <code>4242421304</code></li>
<li><code>[INFO]</code>: 随便</li>
<li><code>[YourEmail]</code>: <code>genshinminecraft114514@gmail.com</code></li>
<li><code>[你的PGP指纹]</code>: <code>ab640628a6fe32c749f36b4426dccbe66925e159</code></li>
<li><code>[IPRange]</code>: <code>172.21.79.128/27</code></li>
<li><code>[IPRangeStart]</code>: <code>172.21.79.128</code></li>
<li><code>[IPRangeEnd]</code>: <code>172.21.79.159</code></li>
<li><code>[CIDR 掩码位]</code>: <code>27</code></li>
</ul>
<p>为了版面，我就不贴上我的完整配置了，可以从<a class="link" href="https://git.dn42.dev/dn42/registry/pulls/3168/files"  target="_blank" rel="noopener"
    >我的 PR</a> 看见</p>
<h3 id="push-并创建-pr">Push 并创建 PR</h3>
<p>当你在本地修改完成文件后，就可以准备 Push 到你自己的 Git 仓库了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">git add .
</span></span><span class="line"><span class="cl">git commit -S
</span></span><span class="line"><span class="cl">./squash-my-commits
</span></span><span class="line"><span class="cl">git push -f
</span></span></code></pre></td></tr></table>
</div>
</div><p>其中，<code>./squash-my-commits</code> 的作用为合并 Commits，因为 DN42 要求必须在同一个 Commit 内完成所有的操作</p>
<p><code>git commit -S</code> 中的 <code>-S</code> 代表使用 PGP 签名该 Commit，提供安全性验证</p>
<p>随后，回到 DN42 Gitea，在<a class="link" href="https://git.dn42.dev/dn42/registry/compare/master...master"  target="_blank" rel="noopener"
    >官方仓库 PR 界面</a>创建一个 PR 提交</p>
<p><code>合并到</code> 不需要更改，<code>拉取从</code> 选择你自己的仓库，然后点击 <code>创建合并请求</code></p>
<p>在 PR 界面中随便写点啥，记住要用英文写</p>
<p>我写的非常简单，标题和内容都为 <code>GLAD！</code></p>
<h3 id="按照提示修改配置">按照提示修改配置</h3>
<p>一般来说，提交 PR 后会有机器人为你检查你的文件的合法性</p>
<p>只要你按照上面的模板写，应该是没有问题的</p>
<p>当出现 <code>need work</code> 标签时，不要慌张，看看机器人给出的提示，翻译成中文根据他提示来修改</p>
<p>如果你尚未申请 IPv6，比如我，你应该会收到这样的提示:</p>
<p><code>💡 Are you sure you don't want to also register an IPv6 prefix ?</code></p>
<p>你回复它 <code>YES</code> 即可，当然你随时想加就加，问题不是很大</p>
<h3 id="完成-dn42-的申请">完成 DN42 的申请</h3>
<p>当你的 PR 已经被合并的时候，你就已经在 DN42 立足了</p>
<p>下面，就是要与他人 Peer，与 DN42 中的各位连接</p>
<p>DN42 是十分 Friendly 的，当你把网配炸，也不会有人责怪你，而是教你如何正确配网</p>
<h2 id="配网">配网</h2>
<h3 id="在机器上安装好必要依赖">在机器上安装好必要依赖</h3>
<p>本文以 Debian 系列系统作为演示，其他系统自己看着办</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">apt install bird2 wireguard
</span></span></code></pre></td></tr></table>
</div>
</div><p>随后，生成 WireGuard 的 公钥以及密钥</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wg genkey <span class="p">|</span> tee privatekey <span class="p">|</span> wg pubkey &gt; publickey
</span></span></code></pre></td></tr></table>
</div>
</div><p>打开 Kernel 中的数据包 Forward 功能，关闭 Kernel 中的 rp_filter 严格模式</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;net.ipv4.ip_forward=1&#34;</span> &gt;&gt; /etc/sysctl.conf
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;net.ipv6.conf.default.forwarding=1&#34;</span> &gt;&gt; /etc/sysctl.conf
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;net.ipv6.conf.all.forwarding=1&#34;</span> &gt;&gt; /etc/sysctl.conf
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;net.ipv4.conf.default.rp_filter=0&#34;</span> &gt;&gt; /etc/sysctl.conf
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;net.ipv4.conf.all.rp_filter=0&#34;</span> &gt;&gt; /etc/sysctl.conf
</span></span><span class="line"><span class="cl">sysctl -p
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="在-potat0-机器人创建-peer-信息">在 Potat0 机器人创建 Peer 信息</h3>
<p>本文采用了 DN42 中的热心人 Potat0 创建的 Bot 来进行配网，非常感谢 Ta 的付出</p>
<p>转到 <a class="link" href="https://t.me/Potat0_DN42_Bot"  target="_blank" rel="noopener"
    >Telegram:@Potat0_DN42_Bot</a></p>
<h4 id="登录">登录</h4>
<h5 id="确认asn">确认ASN</h5>
<p>发送 &lsquo;/login&rsquo; 以登录你的 ASN</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Enter your ASN, without prefix AS
</span></span><span class="line"><span class="cl">请输入你的 ASN，不要加 AS 前缀
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">4242421304
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="通过邮箱验证">通过邮箱验证</h5>
<p>随后通过邮箱验证</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Select the email address to receive the verification code.
</span></span><span class="line"><span class="cl">选择接收验证码的邮箱。
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">genshinminecraft114514@gmail.com
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Verification code has been sent to your email.
</span></span><span class="line"><span class="cl">验证码已发送至您的邮箱。
</span></span><span class="line"><span class="cl">Please contact @Potat00000 if you can not receive it.
</span></span><span class="line"><span class="cl">如果无法收到请联系 @Potat00000
</span></span><span class="line"><span class="cl">Enter your verification code:
</span></span><span class="line"><span class="cl">请输入验证码：
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后在邮箱等待验证码，发送回 Bot</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">xxxxxxxxxxxxxxxxxx
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Welcome!
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">GENSHINMINECRAFT AS4242421304
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">欢迎你！
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">GENSHINMINECRAFT AS4242421304
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="创建一个-peer">创建一个 Peer</h4>
<p>对 Bot 发送 <code>/peer</code></p>
<h5 id="选择一个节点">选择一个节点</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">You will peer with me through the following identity:  
</span></span><span class="line"><span class="cl">你将通过以下身份与我 Peer：  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">AS4242421304
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">If it is wrong, please use /cancel to interrupt the operation.  
</span></span><span class="line"><span class="cl">如果有误请输入 /cancel 终止操作。  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">Any problems with the AutoPeer process, please contact @Potat00000  
</span></span><span class="line"><span class="cl">AutoPeer 过程中产生任何问题，请联系 @Potat00000  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">Node List 节点列表  
</span></span><span class="line"><span class="cl">-
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">US1 | Las Vegas, USA | BuyVM
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  ✔️ Open For Peer  
</span></span><span class="line"><span class="cl">  ✔️ Capacity: 52 / Unlimited  
</span></span><span class="line"><span class="cl">  ✔️ IPv4: Yes  
</span></span><span class="line"><span class="cl">  ✔️ IPv6: Yes  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">-
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">HK1 | Hong Kong | Skywolf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  ✔️ Open For Peer  
</span></span><span class="line"><span class="cl">  ✔️ Capacity: 41 / Unlimited  
</span></span><span class="line"><span class="cl">  ✔️ IPv4: Yes  
</span></span><span class="line"><span class="cl">  ✔️ IPv6: Yes  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">-
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">NO1 | Sandefjord, Norway | Terrahost
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  ✔️ Open For Peer  
</span></span><span class="line"><span class="cl">  ✔️ Capacity: 27 / Unlimited  
</span></span><span class="line"><span class="cl">  ✔️ IPv4: Yes  
</span></span><span class="line"><span class="cl">  ✔️ IPv6: Yes  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">Which node do you want to choose?  
</span></span><span class="line"><span class="cl">你想选择哪个节点？
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">US1 | Las Vegas, USA | BuyVM  
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="配置-dn42-内网-ip">配置 DN42 内网 IP</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">What routes do you want to transmit with me?  
</span></span><span class="line"><span class="cl">你想和我传递哪些路由？  
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">IPv4 only  
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Input your DN42 IPv4 address, without /L suffix.  
</span></span><span class="line"><span class="cl">请输入你的 DN42 IPv4 地址，不包含 /L 后缀。
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后，在你的 IP 段内挑选一个 IP，请注意，IP 段中的第一个 IP 以及最后一个 IP 都是<strong>不可用</strong>的</p>
<p>比如我挑选了 <code>172.21.79.131</code> ，发送给 Bot</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">172.21.79.131
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="配置公网-ip--port">配置公网 IP &amp;&amp; Port</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Input your clearnet address for WireGuard tunnel, without port.  
</span></span><span class="line"><span class="cl">请输入你用于 WireGurad 隧道的公网地址，不包含端口。  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">You can use IPv4 or IPv6 to establish a tunnel with me.  
</span></span><span class="line"><span class="cl">你可以使用 IPv4 或者 IPv6 与我建立隧道。  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">If you don&#39;t have a static clearnet address or is behind NAT, please contact @Potat00000  
</span></span><span class="line"><span class="cl">如果你没有静态公网地址，或你的服务器在 NAT 网络中，请联系 @Potat00000
</span></span></code></pre></td></tr></table>
</div>
</div><p>然后输入你的公网地址，可以是域名，也可以是 IP，当然也允许 IPv6</p>
<p>为了隐私，我把我的 IP 打码了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">xx.xx.xx.xx
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Input your port for WireGuard tunnel.  
</span></span><span class="line"><span class="cl">请输入你用于 WireGurad 隧道的端口。  
</span></span></code></pre></td></tr></table>
</div>
</div><p>选择一个 <strong>你具有完全访问权限的端口</strong>，为什么要着重说出来呢，主要是部分 Nat 机器只有一定数量的端口，非全端口，只能选择暴露在公网的端口</p>
<p>一般来说，DN42 使用的 WireGuard 端口都是以 <code>2[ASN 后四位]</code> 来编写的，不过是可以自定义的，这只是一个习惯，比如我的第一个端口就为 <code>21304</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">48306  
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="wireguard-公钥">WireGuard 公钥</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Input your WireGuard public key  
</span></span><span class="line"><span class="cl">请输入你的 WireGuard 公钥
</span></span></code></pre></td></tr></table>
</div>
</div><p>这个公钥储存在上方生成的 <code>publickey</code> 文件中，复制粘贴过来即可</p>
<p>为了隐私，我还是乱打（</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">xxxxxxxxxxxxxxxxxxxxxxxx
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="联系方式">联系方式</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Input your contact information (Telegram or Email)  
</span></span><span class="line"><span class="cl">请输入你的联系方式（Telegram 或 Email）
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">@C1oudF1are
</span></span></code></pre></td></tr></table>
</div>
</div><p>这部分写可以联系到自己的即可，问题不大</p>
<h5 id="确认信息并建立">确认信息并建立</h5>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Please check all your information  
</span></span><span class="line"><span class="cl">请确认你的信息  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Region:  
</span></span><span class="line"><span class="cl">    US1 | Las Vegas, USA | BuyVM  
</span></span><span class="line"><span class="cl">Basic:  
</span></span><span class="line"><span class="cl">    ASN:         4242421304  
</span></span><span class="line"><span class="cl">    Channel:     IPv4 only  
</span></span><span class="line"><span class="cl">    MP-BGP:      Not supported  
</span></span><span class="line"><span class="cl">    IPv6:        Not enabled  
</span></span><span class="line"><span class="cl">    IPv4:        172.21.79.131  
</span></span><span class="line"><span class="cl">    Request-LLA: Not required due to not use LLA as IPv6  
</span></span><span class="line"><span class="cl">Tunnel:  
</span></span><span class="line"><span class="cl">    Endpoint:    xx.xx.xx.xx:48306
</span></span><span class="line"><span class="cl">    PublicKey:   xxxxxxxxxxxxxxxxxxxxxxxx  
</span></span><span class="line"><span class="cl">Contact:  
</span></span><span class="line"><span class="cl">    @C1oudF1are  
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">Please enter an yes to confirm. All other inputs indicate the cancellation of the operation.  
</span></span><span class="line"><span class="cl">确认无误请输入 yes，所有其他输入表示取消操作。
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">yes
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Peer has been created  
</span></span><span class="line"><span class="cl">Peer 已建立
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="获取-peer-info">获取 Peer Info</h5>
<p>向机器人发送 <code>/info</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Node:  
</span></span><span class="line"><span class="cl">    US1 | Las Vegas, USA | BuyVM  
</span></span><span class="line"><span class="cl">Information on your side:  
</span></span><span class="line"><span class="cl">    ASN:  
</span></span><span class="line"><span class="cl">        AS4242421304  
</span></span><span class="line"><span class="cl">    Endpoint:  
</span></span><span class="line"><span class="cl">        xx.xx.xx.xx:48306  
</span></span><span class="line"><span class="cl">    WireGuard Public Key:   
</span></span><span class="line"><span class="cl">        xxxxxxxxxxxxxxxxxxxxxxxx
</span></span><span class="line"><span class="cl">    DN42 Address:  
</span></span><span class="line"><span class="cl">        IPv4: 172.21.79.131/32  
</span></span><span class="line"><span class="cl">Information on my side:  
</span></span><span class="line"><span class="cl">    ASN:  
</span></span><span class="line"><span class="cl">        AS4242421816  
</span></span><span class="line"><span class="cl">    Endpoint:  
</span></span><span class="line"><span class="cl">        us1.dn42.potat0.cc:21304  
</span></span><span class="line"><span class="cl">    WireGuard Public Key:  
</span></span><span class="line"><span class="cl">        LUwqKS6QrCPv510Pwt1eAIiHACYDsbMjrkrbGTJfviU=  
</span></span><span class="line"><span class="cl">    DN42 Address:  
</span></span><span class="line"><span class="cl">        IPv4: 172.23.246.3/32  
</span></span><span class="line"><span class="cl">WireGuard Status:  
</span></span><span class="line"><span class="cl">    Latest handshake:  
</span></span><span class="line"><span class="cl">        Never  
</span></span><span class="line"><span class="cl">    Transfer:  
</span></span><span class="line"><span class="cl">        0B received, 13.3 KB sent  
</span></span><span class="line"><span class="cl">Bird Status:  
</span></span><span class="line"><span class="cl">    IPv4 Session with IPv4 channel only  
</span></span><span class="line"><span class="cl">    Connect  
</span></span><span class="line"><span class="cl">Contact:  
</span></span><span class="line"><span class="cl">    @C1oudF1are  
</span></span><span class="line"><span class="cl">    (GENSHINMINECRAFT)
</span></span></code></pre></td></tr></table>
</div>
</div><p>这样就算完成了 Peer 的建立，接下来就是配置你自己机器的环境咯！</p>
<h3 id="配置-wireguard">配置 WireGuard</h3>
<h4 id="编写配置文件">编写配置文件</h4>
<p>这个配置当然是有模板的</p>
<p>配置文件一般储存于 <code>/etc/wireguard/xxx.conf</code></p>
<p>建议将配置文件存于 <code>/etc/wireguard/potat0.conf</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">[Interface]
</span></span><span class="line"><span class="cl"># 你的 WireGuard 私钥，存储于上方生成 privitekey 文件中
</span></span><span class="line"><span class="cl">PrivateKey = [PrivateKey]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 你的端口号，上方输入的公网 IP 与公网端口
</span></span><span class="line"><span class="cl">ListenPort = [Port]
</span></span><span class="line"><span class="cl">Table = off
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># 第一个是你的 DN42 内的 IP，第二个是我的（或者你的 Peer 的）
</span></span><span class="line"><span class="cl">PostUp = ip addr add [你的 DN42 IP] peer [Potat0 的 DN42 IP] dev %i
</span></span><span class="line"><span class="cl">PostUp = sysctl -w net.ipv6.conf.%i.autoconf=0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[Peer]
</span></span><span class="line"><span class="cl">PublicKey = [Potat0 的公钥]
</span></span><span class="line"><span class="cl">Endpoint = [Potat0 的公网服务器 IP:Port]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">AllowedIPs = 10.0.0.0/8, 172.20.0.0/14, 172.31.0.0/16, fd00::/8, fe80::/64
</span></span></code></pre></td></tr></table>
</div>
</div><p>这些配置，均可从上方的 Info 信息中获取到，编辑完保存并退出</p>
<h4 id="开启-wireguard-隧道">开启 WireGuard 隧道</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wg-quick up potat0
</span></span></code></pre></td></tr></table>
</div>
</div><p>当无报错输出时，即为配置成功</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span><span class="c1">#] ip link add potat0 type wireguard</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span><span class="c1">#] wg setconf potat0 /dev/fd/63</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span><span class="c1">#] ip link set mtu 2720 up dev potato</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span><span class="c1">#] ip addr add [你的 DN42 IP] peer [Potat0 的 DN42 IP] dev potat0</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span><span class="c1">#] sysctl -w net.ipv6.conf.potat0.autoconf=0</span>
</span></span><span class="line"><span class="cl">net.ipv6.conf.potato.autoconf <span class="o">=</span> <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="检查连接">检查连接</h4>
<p>你可以使用 <code>wg</code> 命令来查看目前所有运行着的隧道</p>
<p>在目前，你可以通过 Ping Potat0 DN42 IP 的方式来检查是否已经通过 WireGuard 连接到 Potat0 的服务器</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ping 172.23.246.4
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">PING 172.23.246.3 (172.23.246.4) 56(84) bytes of data.
</span></span><span class="line"><span class="cl">64 bytes from 172.23.246.3: icmp_seq=1 ttl=64 time=428 ms
</span></span><span class="line"><span class="cl">64 bytes from 172.23.246.3: icmp_seq=2 ttl=64 time=441 ms
</span></span><span class="line"><span class="cl">64 bytes from 172.23.246.3: icmp_seq=3 ttl=64 time=417 ms
</span></span><span class="line"><span class="cl">64 bytes from 172.23.246.3: icmp_seq=4 ttl=64 time=407 ms
</span></span></code></pre></td></tr></table>
</div>
</div><p>有正常返回，说明是正常的。但这<strong>不代表你已经完全融入了 DN42</strong>，这只不过是你与 Potat0 建立了一个 VPN 而已</p>
<h3 id="配置-bird2">配置 Bird2</h3>
<p>终于到本文章的重头戏了，Bird2 的配置是在 DN42 路上最难的一个部分，你需要对 BGP、路由等知识有最浅的了解</p>
<p>但是我认为还好，反正都是模板的事情（</p>
<h4 id="下载-roa-文件">下载 Roa 文件</h4>
<p>这个文件，主要是类似于分流的，如果你不了解，请谷歌</p>
<p>如果你认为没有必要去了解，直接运行以下命令就行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">wget -4 -O /tmp/dn42_roa.conf https://dn42.burble.com/roa/dn42_roa_bird2_4.conf <span class="o">&amp;&amp;</span> mv -f /tmp/dn42_roa.conf /etc/bird/dn42_roa.conf
</span></span><span class="line"><span class="cl">wget -4 -O /tmp/dn42_roa_v6.conf https://dn42.burble.com/roa/dn42_roa_bird2_6.conf <span class="o">&amp;&amp;</span> mv -f /tmp/dn42_roa_v6.conf /etc/bird/dn42_roa_v6.conf
</span></span><span class="line"><span class="cl">mv /etc/bird/dn42_roa_v6.conf /etc/bird/roa_dn42_v6.conf
</span></span><span class="line"><span class="cl">mv /etc/bird/dn42_roa.conf /etc/bird/roa_dn42.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p>该脚本来自于 <code>High Ping Network</code> 的小伙伴 sam，懒得改了，复制粘贴就能用不是很爽吗</p>
<h4 id="编写-bird2-主配置文件">编写 Bird2 主配置文件</h4>
<p>Bird2 的主配置文件默认放在 <code>/etc/bird/bird.conf</code>，我们即将要编辑它</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span><span class="lnt">83
</span><span class="lnt">84
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">define</span> <span class="n">OWNAS</span>       <span class="o">=</span> <span class="mi">4242421304</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">define</span> <span class="n">OWNIP</span>       <span class="o">=</span> <span class="mf">172.21</span><span class="o">.</span><span class="mf">79.130</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">define</span> <span class="n">OWNNET</span>      <span class="o">=</span> <span class="mf">172.21</span><span class="o">.</span><span class="mf">79.128</span><span class="o">/</span><span class="mi">27</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">define</span> <span class="n">OWNNETSET</span>   <span class="o">=</span> <span class="p">[</span> <span class="mf">172.21</span><span class="o">.</span><span class="mf">79.128</span><span class="o">/</span><span class="mi">27</span> <span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">router</span> <span class="n">id</span> <span class="n">OWNIP</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">protocol</span> <span class="n">device</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">scan</span> <span class="n">time</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">function</span> <span class="n">is_self_net</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">net</span> <span class="o">~</span> <span class="n">OWNNETSET</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">function</span> <span class="n">is_valid_network</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">net</span> <span class="o">~</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">        <span class="mf">172.20</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">14</span><span class="p">{</span><span class="mi">21</span><span class="p">,</span><span class="mi">29</span><span class="p">},</span> <span class="c1"># dn42</span>
</span></span><span class="line"><span class="cl">        <span class="mf">172.20</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span><span class="p">{</span><span class="mi">28</span><span class="p">,</span><span class="mi">32</span><span class="p">},</span> <span class="c1"># dn42 Anycast</span>
</span></span><span class="line"><span class="cl">        <span class="mf">172.21</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span><span class="p">{</span><span class="mi">28</span><span class="p">,</span><span class="mi">32</span><span class="p">},</span> <span class="c1"># dn42 Anycast</span>
</span></span><span class="line"><span class="cl">        <span class="mf">172.22</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span><span class="p">{</span><span class="mi">28</span><span class="p">,</span><span class="mi">32</span><span class="p">},</span> <span class="c1"># dn42 Anycast</span>
</span></span><span class="line"><span class="cl">        <span class="mf">172.23</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">24</span><span class="p">{</span><span class="mi">28</span><span class="p">,</span><span class="mi">32</span><span class="p">},</span> <span class="c1"># dn42 Anycast</span>
</span></span><span class="line"><span class="cl">        <span class="mf">172.31</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">16</span><span class="o">+</span><span class="p">,</span>       <span class="c1"># ChaosVPN</span>
</span></span><span class="line"><span class="cl">        <span class="mf">10.100</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">14</span><span class="o">+</span><span class="p">,</span>       <span class="c1"># ChaosVPN</span>
</span></span><span class="line"><span class="cl">        <span class="mf">10.127</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">16</span><span class="p">{</span><span class="mi">16</span><span class="p">,</span><span class="mi">32</span><span class="p">},</span> <span class="c1"># neonetwork</span>
</span></span><span class="line"><span class="cl">        <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.0</span><span class="o">/</span><span class="mi">8</span><span class="p">{</span><span class="mi">15</span><span class="p">,</span><span class="mi">24</span><span class="p">}</span>     <span class="c1"># Freifunk.net</span>
</span></span><span class="line"><span class="cl">    <span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">roa4</span> <span class="n">table</span> <span class="n">dn42_roa</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">protocol</span> <span class="k">static</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">roa4</span> <span class="p">{</span> <span class="n">table</span> <span class="n">dn42_roa</span><span class="p">;</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="n">include</span> <span class="s2">&#34;/etc/bird/roa_dn42.conf&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">protocol</span> <span class="n">kernel</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">scan</span> <span class="n">time</span> <span class="mi">20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">ipv4</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">import</span> <span class="n">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">export</span> <span class="n">filter</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">source</span> <span class="o">=</span> <span class="n">RTS_STATIC</span> <span class="n">then</span> <span class="n">reject</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">krt_prefsrc</span> <span class="o">=</span> <span class="n">OWNIP</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">accept</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">protocol</span> <span class="k">static</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">route</span> <span class="n">OWNNET</span> <span class="n">reject</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">ipv4</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">import</span> <span class="n">all</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">export</span> <span class="n">none</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">template</span> <span class="n">bgp</span> <span class="n">dnpeers</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">local</span> <span class="n">as</span> <span class="n">OWNAS</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">path</span> <span class="n">metric</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">ipv4</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">import</span> <span class="n">filter</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">is_valid_network</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">is_self_net</span><span class="p">()</span> <span class="n">then</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">roa_check</span><span class="p">(</span><span class="n">dn42_roa</span><span class="p">,</span> <span class="n">net</span><span class="p">,</span> <span class="n">bgp_path</span><span class="o">.</span><span class="n">last</span><span class="p">)</span> <span class="o">!=</span> <span class="n">ROA_VALID</span><span class="p">)</span> <span class="n">then</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">print</span> <span class="s2">&#34;[dn42] ROA check failed for &#34;</span><span class="p">,</span> <span class="n">net</span><span class="p">,</span> <span class="s2">&#34; ASN &#34;</span><span class="p">,</span> <span class="n">bgp_path</span><span class="o">.</span><span class="n">last</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">reject</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="n">accept</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="n">reject</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">export</span> <span class="n">filter</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">is_valid_network</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="n">source</span> <span class="o">~</span> <span class="p">[</span><span class="n">RTS_STATIC</span><span class="p">,</span> <span class="n">RTS_BGP</span><span class="p">]</span> <span class="n">then</span> <span class="n">accept</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="n">reject</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="n">import</span> <span class="n">limit</span> <span class="mi">1000</span> <span class="n">action</span> <span class="n">block</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">include</span> <span class="s2">&#34;/etc/bird/peers/*.conf&#34;</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>由于这个配置文件的语法有些抽象，所以我直接贴上我的配置了</p>
<p>主要需要修改的仅为前四行:</p>
<ul>
<li>第一行为 ASN，记得不要加上 <code>AS</code></li>
<li>第二行为你的 DN42 IP</li>
<li>第三行为你 ASN 其中的 IP 段</li>
<li>第四行同第三行，但是要记得<em>不要删去两边的空格以及中括号</em></li>
</ul>
<p>真心不建议动不动就抄模板，无法理解其中的含义，是对技术进步没有帮助的！</p>
<p>建议参阅: <a class="link" href="https://bird.network.cz/?get_doc&amp;f=bird.html&amp;v=20"  target="_blank" rel="noopener"
    >BIRD User&rsquo;s Guide</a></p>
<h4 id="编写-bird2-peers-文件">编写 Bird2 Peers 文件</h4>
<p>新建一个 <code>/etc/bird/peers/</code> 文件夹，并在其中创建 <code>potat0.conf</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">protocol bgp peers from dnpeers {
</span></span><span class="line"><span class="cl">    neighbor [Potat0 的 DN42 IP] as [Potat0 的 ASN];
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>这个配置非常简单，需要的内容也可以在上面获取到的 Info 看到</p>
<h4 id="bird2-启动">Bird2? 启动!</h4>
<p>启动 Bird2 仅需一行命令</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">birdc c
</span></span></code></pre></td></tr></table>
</div>
</div><p>可以通过 <code>birdc s p</code> 查看 Bird2 的状态</p>
<p><code>peers      BGP        ---        up     13:01:51.314  Established</code></p>
<p>当输出显示 <code>Established</code> 时，也配置得差不多了</p>
<h2 id="all-done">ALL DONE!</h2>
<p>当你完成上述所有步骤，恭喜你，你即将完成好你第一次 DN42 之旅，现在只需要动动你的小手，在终端输入:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ping 172.20.0.53
</span></span></code></pre></td></tr></table>
</div>
</div><p>当其可以正常输出</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">PING 172.20.0.53 (172.20.0.53) 56(84) bytes of data.
</span></span><span class="line"><span class="cl">64 bytes from 172.20.0.53: icmp_seq=1 ttl=62 time=471 ms
</span></span><span class="line"><span class="cl">64 bytes from 172.20.0.53: icmp_seq=2 ttl=62 time=412 ms
</span></span><span class="line"><span class="cl">64 bytes from 172.20.0.53: icmp_seq=3 ttl=62 time=415 ms
</span></span><span class="line"><span class="cl">64 bytes from 172.20.0.53: icmp_seq=4 ttl=62 time=435 ms
</span></span></code></pre></td></tr></table>
</div>
</div><p>你就已经跨入了 DN42 的大门，Ping 命令所选的为 DN42 中的 DNS 服务器</p>
<h2 id="小结">小结</h2>
<p>总的来说，DN42 的配置的确是非常具有难度以及挑战性的，但是其带来的成就感也是无与伦比的</p>
<p>我们会在后面持续推出有关于 DN42 的 域名、DNS 配置教程等博文</p>
<p>当你需要无偿/有偿帮助时，可以联系 Telegram: <a class="link" href="https://t.me/C1oudF1are"  target="_blank" rel="noopener"
    >@C1oudF1are</a></p>
<p>当然，我们也欢迎在 DN42 网络中 Peer，详情请移步 <a class="link" href="https://t.me/HighPingChat"  target="_blank" rel="noopener"
    >@HighPingChat</a></p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/ourasn/">
        
        
            <div class="article-image">
                <img src="/p/ourasn/_huc4356c5dc91c908c54036cde78cdf035_729873_37b834d8f6083611d4684c4b907b5b0d.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post A &#34;Hello, The Internet&#34; from AS215575"
                        data-key="ourasn" 
                        data-hash="md5-2LE/uHr3hCZmEZS8kdOaDw==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">A &#34;Hello, The Internet&#34; from AS215575</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/2024new/">
        
        
            <div class="article-image">
                <img src="/p/2024new/8lGqPEAUXB5HaCz.bf6cb82d72a82b93ac40af72a2c4c5cb_hua1f43fb4538f7439d5f2e88aa6c5413f_292373_250x150_fill_q75_box_smart1.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post 新年新气象－－新博客，新域名，新ASN！"
                        data-key="2024new" 
                        data-hash="md5-v2y4LXKoK5OsQK9yosTFyw==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">新年新气象－－新博客，新域名，新ASN！</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/cf302/">
        
        
            <div class="article-image">
                <img src="/p/cf302/kS4EzZ3v7gNHWJG.032bd40ce6ffdf76c4b64b091a78d0cf_huddee8d4853eae2dac09114992a9b0569_224618_250x150_fill_q75_box_smart1.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post 仅依靠 CloudFlare 完成带路径参数重定向"
                        data-key="cf302" 
                        data-hash="md5-AyvUDOb/33bEtksJGnjQzw==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">仅依靠 CloudFlare 完成带路径参数重定向</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/ceping-rackdogau/">
        
        
            <div class="article-image">
                <img src="/p/ceping-rackdogau/4Dvs6WLGZi83KwQ.9194d1e7970b0408d53be17f700c7b7d_hufbe9b55647ae2a5f0c5544f2f1072e66_165846_250x150_fill_q75_box_smart1.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Rackdog 冷门商家 澳大利亚 $3 1C512M 测评"
                        data-key="ceping-rackdogau" 
                        data-hash="md5-kZTR55cLBAjVO&#43;F/cAx7fQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Rackdog 冷门商家 澳大利亚 $3 1C512M 测评</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/samopenai/">
        
        
            <div class="article-image">
                <img src="/p/samopenai/_hueb7575a1ce59d0f2ba59b48cf4127930_9058_86d2f9e39438cc136bbc82df1fdb0cf1.png" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post OpenAI 测评"
                        data-key="samopenai" 
                        data-hash="md5-eG7KxYnRVppOPQErIPuK0A==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">OpenAI 测评</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2024 HighPing们の小小藏身地
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        主题 <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.21.0">Stack</a></b> 由 <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> 设计
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
